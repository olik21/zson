function calendar(a,t,e,n,r){var l=new Date(t,e+1,0).getDate(),o=new Date(t,e,l),d=new Date(o.getFullYear(),o.getMonth(),l).getDay(),c=new Date(o.getFullYear(),o.getMonth(),1).getDay(),h="<tr>";e=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];if(monthAbbr=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],0!=c)for(var u=1;u<c;u++)h+="<td>";else for(u=0;u<6;u++)h+="<td>";for(u=1;u<=l;u++){var s="",g="";r&&r[new Date(o.getFullYear(),o.getMonth(),u).valueOf()]&&(s=r[new Date(o.getFullYear(),o.getMonth(),u).valueOf()],g="not-empty"),u==(new Date).getDate()&&o.getFullYear()==(new Date).getFullYear()&&o.getMonth()==(new Date).getMonth()?h+='<td class="today'+g+'" data-date="'+new Date(o.getFullYear(),o.getMonth(),u).valueOf()+'">'+u+"<span>"+s+"</span>":h+='<td class="'+g+'" data-date="'+new Date(o.getFullYear(),o.getMonth(),u).valueOf()+'">'+u+"<span>"+s+"</span>",0==new Date(o.getFullYear(),o.getMonth(),u).getDay()&&(h+="<tr>")}for(u=d;u<7;u++)h+='<td class="empty"> ';if(document.querySelector("#"+a+" tbody").innerHTML=h,document.querySelector("#"+a+" thead td:nth-child(2)").innerHTML=e[o.getMonth()]+" "+(n?"":o.getFullYear()),document.querySelector("#"+a+" thead td:nth-child(2)").dataset.month=o.getMonth(),document.querySelector("#"+a+" thead td:nth-child(2)").dataset.year=o.getFullYear(),document.querySelectorAll("#"+a+" tbody tr").length<6&&(document.querySelector("#"+a+" tbody").innerHTML+='<tr><td class="empty extra"> <td class="empty extra"> <td class="empty extra"> <td class="empty extra"> <td class="empty extra"> <td class="empty extra"> <td class="empty extra"> '),n&&(document.querySelector("#"+a+" thead tr:nth-child(1) td:nth-child(1)").innerHTML="<b>‹</b> "+(monthAbbr[o.getMonth()-1]||monthAbbr[monthAbbr.length-1]),document.querySelector("#"+a+" thead tr:nth-child(1) td:nth-child(3)").innerHTML=(monthAbbr[o.getMonth()+1]||monthAbbr[0])+" <b>›</b>"),n||r){var y=document.querySelectorAll("#"+a+" tbody td:not(.empty):not(.today)");Array.prototype.forEach.call(y,function(t){t.onclick=function(t){var e=document.querySelector("#"+a+" tbody .active");e&&e.classList.remove("active"),"SPAN"===t.target.tagName?t.target.parentNode.classList.add("active"):t.target.classList.add("active")}})}}